name: trigger jenkins on close of PR
on: 
  pull_request:
    types: [closed]
  push:
    branches:
      - feature*
jobs:
  build:
    name: CI Pipeline-Build
    runs-on: ubuntu-latest
    steps:
    - name: "Trigger jenkins job"
      uses: enflo/jenkins-action@master
      with:
        url: "http://digisprint-lp.com:5457"
        user: ${{ secrets.JENKINS_USER }}
        token: ${{ secrets.JENKINS_TOKEN }}
        job: "job/config-pipeline"
        parameters: token=${{ secrets.JENKINS_BUILD_TOKEN }}&branch_name=${{ github.event.pull_request.base.ref }}
    - name: "Get job status"
      run: echo "triggered jenmins job successfully"
